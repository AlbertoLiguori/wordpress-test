jQuery(document).ready(function(a){"use strict";var c,g,f,i,j,q,o,b,r,n,h,k,l,m,p,d,e;typeof homeyProfile!="undefined"&&(c=homeyProfile.ajaxURL,g=homeyProfile.user_id,f=homeyProfile.homey_upload_nonce,i=homeyProfile.verify_file_type,j=homeyProfile.homey_site_url,q=homeyProfile.process_loader_refresh,o=homeyProfile.sending_info,b=homeyProfile.process_loader_spinner,r=homeyProfile.process_loader_circle,n=homeyProfile.process_loader_cog,h=homeyProfile.success_icon,k=homeyProfile.processing_text,l=homeyProfile.gdpr_agree_text,a('.delete_user_photo').on('click',function(h){var d,e;h.preventDefault(),d=a(this),e=a('#profile-pic-id').val(),a.ajax({type:'POST',dataType:'json',url:c,data:{action:'homey_delete_user_photo',verify_nonce:f,user_id:g,attach_id:e},beforeSend:function(){d.children('i').remove(),d.prepend('<i class="fa-left '+b+'"></i>')},success:function(b){b.success&&a('#homey_profile_photo').empty()},error:function(a){},complete:function(){d.children('i').removeClass(b)}})}),a('.delete_user_account_confirmed').on('click',function(e){e.preventDefault();var d=a(this);a.ajax({type:'POST',dataType:'json',url:c,data:{action:'homey_delete_user_account',verify_nonce:f,user_id:g},beforeSend:function(){d.children('i').remove(),d.prepend('<i class="fa-left '+b+'"></i>')},success:function(a){a.success&&(window.location.href=j)},error:function(a){},complete:function(){d.children('i').removeClass(b)}})}),a('#delete_verify_id').on('click',function(h){var d,e;h.preventDefault(),d=a(this),e=a('#profile-doc-id').val(),a.ajax({type:'POST',dataType:'json',url:c,data:{action:'homey_delete_user_doc',verify_nonce:f,user_id:g,attach_id:e},beforeSend:function(){d.children('i').remove(),d.prepend('<i class="fa-left '+b+'"></i>')},success:function(b){b.success&&a('#homey_user_doc').empty()},error:function(a){},complete:function(){d.children('i').removeClass(b)}})}),a('#btn_verify_id').on('click',function(e){e.preventDefault();var d=a(this);jQuery('#id_verify_mgs').empty(),a.ajax({type:'POST',dataType:'json',url:c,data:{action:'homey_send_doc_verification_request'},beforeSend:function(){d.children('i').remove(),d.prepend('<i class="fa-left '+b+'"></i>')},success:function(b){b.success?(jQuery('#id_verify_mgs').empty().append('<div class="alert alert-success alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"></button>'+b.msg+'</div>'),a('#btn_verify_id').remove()):jQuery('#id_verify_mgs').empty().append('<div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"></button>'+b.msg+'</div>')},error:function(a){},complete:function(){d.children('i').removeClass(b)}})}),a(".homey_profile_save").on('click',function(L){var d,e,g,i,j,k,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,f;if(L.preventDefault(),d=a(this),a('#gdpr_agreement').length>0){if(!a('#gdpr_agreement').is(":checked"))return jQuery('#profile_message').empty().append('<div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+l+'</div>'),a('html,body').animate({scrollTop:a(".user-dashboard-right").offset().top},'slow'),!1;e='checked'}g=a("#firstname").val(),i=a("#lastname").val(),j=a("#useremail").val(),k=a('select[name="display_name"] option:selected').val(),m=a('#native_language').val(),n=a("#other_language").val(),o=a("#bio").val(),p=a("#street_address").val(),q=a("#apt_suit").val(),r=a("#city").val(),s=a("#state").val(),t=a("#zipcode").val(),u=a("#neighborhood").val(),v=a("#country").val(),w=a("#facebook").val(),x=a("#twitter").val(),y=a("#linkedin").val(),z=a("#googleplus").val(),A=a("#instagram").val(),B=a("#pinterest").val(),C=a("#youtube").val(),D=a("#vimeo").val(),E=a("#airbnb").val(),F=a("#trip_advisor").val(),G=a("#em_contact_name").val(),H=a("#em_relationship").val(),I=a("#em_email").val(),J=a("#em_phone").val(),K=a('#homey_profile_security').val(),f=a('select[name="role"] option:selected').val(),a.ajax({type:'POST',url:c,dataType:'json',data:{action:'homey_save_profile',firstname:g,lastname:i,useremail:j,display_name:k,role:f,native_language:m,other_language:n,bio:o,street_address:p,apt_suit:q,city:r,state:s,zipcode:t,neighborhood:u,country:v,facebook:w,twitter:x,linkedin:y,googleplus:z,instagram:A,pinterest:B,youtube:C,vimeo:D,airbnb:E,trip_advisor:F,em_contact_name:G,em_relationship:H,em_email:I,em_phone:J,gdpr_agreement:e,security:K},beforeSend:function(){d.children('i').remove(),d.prepend('<i class="fa-left '+b+'"></i>')},success:function(b){b.success?(jQuery('#profile_message').empty().append('<div class="alert alert-success alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+b.msg+'</div>'),a('html,body').animate({scrollTop:a(".user-dashboard-right").offset().top},'slow')):(jQuery('#profile_message').empty().append('<div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+b.msg+'</div>'),a('html,body').animate({scrollTop:a(".user-dashboard-right").offset().top},'slow'))},error:function(a){},complete:function(){d.children('i').removeClass(b),d.children('i').addClass(h)}})}),a("#superhost_docVerify").on('click',function(e){e.preventDefault();var d=a(this);a.ajax({type:'POST',dataType:'json',url:c,data:{action:'homey_make_superhost_idverify',doc_verified:a('input[name="doc_verified"]:checked').val(),is_superhost:a('input[name="is_superhost"]:checked').val(),user_id:a('#user_id').val(),security12:a('#homey_superhost_idverify_security').val()},beforeSend:function(){d.children('i').remove(),d.prepend('<i class="fa-left '+b+'"></i>')},success:function(b){b.success?(jQuery('#superhost_msgs').empty().append('<div class="alert alert-success alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+b.msg+'</div>'),window.location.reload()):jQuery('#superhost_msgs').empty().append('<div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+b.msg+'</div>'),a('html,body').animate({scrollTop:a(".user-dashboard-right").offset().top},'slow')},error:function(a){},complete:function(){d.children('i').removeClass(b)}})}),a("#homey_change_pass").on('click',function(i){var e,j,f,g,d;i.preventDefault(),d=a(this),f=a("#newpass").val(),g=a("#confirmpass").val(),e=a("#homey-security-pass").val(),a.ajax({type:'POST',dataType:'json',url:c,data:{action:'homey_ajax_password_reset',newpass:f,confirmpass:g,'homey-security-pass':e},beforeSend:function(){d.children('i').remove(),d.prepend('<i class="fa-left '+b+'"></i>')},success:function(a){a.success?(jQuery('#password_reset_msgs').empty().append('<p class="success text-success"><i class="fa fa-check"></i> '+a.msg+'</p>'),jQuery('#newpass, #confirmpass').val('')):jQuery('#password_reset_msgs').empty().append('<p class="error text-danger"><i class="fa fa-close"></i> '+a.msg+'</p>')},error:function(a){},complete:function(){d.children('i').removeClass(b),d.children('i').addClass(h)}})}),a('#homey_delete_account').on('click',function(b){b.preventDefault();var d=window.confirm("Are you sure!, you want to delete a account.");d==!0&&a.ajax({type:'post',url:c,dataType:'json',data:{action:'homey_delete_account'},beforeSend:function(){m(k)},success:function(a){a.success&&(window.location.href=j)},error:function(a,c,d){var b=eval("("+a.responseText+")");console.log(b.Message)}})}),m=function(a){var b='<div class="modal fade" id="fave_modal" tabindex="-1" role="dialog" aria-labelledby="faveModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body homey_messages_modal">'+a+'</div></div></div></div></div>';jQuery('body').append(b),jQuery('#fave_modal').modal()},p=function(){jQuery('#fave_modal').modal('hide')},d=new plupload.Uploader({browse_button:'select_user_profile_photo',file_data_name:'homey_file_data_name',multi_selection:!1,url:c+"?action=homey_user_picture_upload&verify_nonce="+f+"&user_id="+g,filters:{mime_types:[{title:i,extensions:"jpg,jpeg,gif,png"}],max_file_size:'5000kb',prevent_duplicates:!1}}),d.init(),d.bind('FilesAdded',function(b,c){var a="";plupload.each(c,function(b){a+='<div id="imageholder-'+b.id+'" class="homey-thumb">'+''+'</div>'}),document.getElementById('homey_profile_photo').innerHTML=a,b.refresh(),d.start()}),d.bind('UploadProgress',function(b,a){document.getElementById("imageholder-"+a.id).innerHTML='<span>'+a.percent+"%</span>"}),d.bind('Error',function(b,a){document.getElementById('upload_errors').innerHTML+="<br/>Error #"+a.code+": "+a.message}),d.bind('FileUploaded',function(f,c,d){var b=a.parseJSON(d.response),e;b.success?(e='<img class="img-circle" src="'+b.url+'" alt="" />'+'<input type="hidden" class="profile-pic-id" id="profile-pic-id" name="profile-pic-id" value="'+b.attachment_id+'"/>',document.getElementById("imageholder-"+c.id).innerHTML=e):console.log(b)}),e=new plupload.Uploader({browse_button:'select_user_verify_id',file_data_name:'homey_id_file_data_name',multi_selection:!1,url:c+"?action=homey_user_document_upload&verify_nonce="+f+"&user_id="+g,filters:{mime_types:[{title:i,extensions:"jpg,jpeg,gif,png"}],max_file_size:'10000kb',prevent_duplicates:!1}}),e.init(),e.bind('FilesAdded',function(b,c){var a="";plupload.each(c,function(b){a+='<div id="imageholder-'+b.id+'" class="homey-thumb">'+''+'</div>'}),document.getElementById('homey_user_doc').innerHTML=a,b.refresh(),e.start()}),e.bind('UploadProgress',function(b,a){document.getElementById("imageholder-"+a.id).innerHTML='<span>'+a.percent+"%</span>"}),e.bind('Error',function(b,a){document.getElementById('upload_errors').innerHTML+="<br/>Error #"+a.code+": "+a.message}),e.bind('FileUploaded',function(f,c,d){var b=a.parseJSON(d.response),e;b.success?(e='<img src="'+b.url+'" alt="" />'+'<input type="hidden" class="profile-doc-id" id="profile-doc-id" name="profile-doc-id" value="'+b.attachment_id+'"/>',document.getElementById("imageholder-"+c.id).innerHTML=e):console.log(b)}))})